<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pi Bot Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Pi Scheduler Bot Dashboard</h1>
            <div id="bot-status-indicator" class="status-indicator-box offline">
                <span>OFFLINE</span>
            </div>
        </header>

        <div class="main-content">
            <!-- Kolom Kontrol -->
            <div class="controls-column">
                <div class="card">
                    <h2>Kontrol Bot</h2>
                    <div class="control-buttons">
                        <button id="startButton" class="btn btn-start">Start Bot</button>
                        <button id="stopButton" class="btn btn-stop">Stop Bot</button>
                    </div>
                </div>

                <div class="card">
                    <h2>Tambah Wallet Target</h2>
                    <form id="addMnemonicsForm">
                        <textarea id="mnemonicsInput" placeholder="Masukkan satu atau lebih frasa, pisahkan dengan baris baru..." rows="5"></textarea>
                        <button type="submit" class="btn">Jadwalkan Wallet</button>
                    </form>
                </div>

                <div class="card">
                    <h2>Konfigurasi</h2>
                    <form id="configForm">
                        <label for="recipientInput">Recipient Address</label>
                        <input type="text" id="recipientInput" placeholder="G..." required>

                        <label for="funderInput">Funder Mnemonic</label>
                        <input type="password" id="funderInput" placeholder="24 kata rahasia Funder (Bank)" required>

                        <label for="sponsorsInput">Sponsor Mnemonics (satu per baris)</label>
                        <textarea id="sponsorsInput" placeholder="24 kata rahasia Sponsor (Kasir)" rows="3" required></textarea>
                        
                        <label for="concurrencyInput">Concurrency (Jumlah Sponsor Bekerja)</label>
                        <input type="number" id="concurrencyInput" value="5" min="1" step="1">

                        <label for="fundingAmountInput">Funding Amount per Task (œÄ)</label>
                        <input type="number" id="fundingAmountInput" value="0.0000401" step="0.0000001" min="0">

                        <button type="submit" class="btn btn-save">Simpan Konfigurasi</button>
                    </form>
                </div>
                 <div class="card">
                    <h2>Operasi Database</h2>
                    <button id="clearDbButton" class="btn btn-danger">Hapus Semua Wallet Target</button>
                </div>
            </div>

            <!-- Kolom Status & Log -->
            <div class="status-log-column">
                <div class="status-grid">
                    <div class="card status-card"><h3>Total</h3><p id="total-wallets">0</p></div>
                    <div class="card status-card"><h3>Scheduled</h3><p id="scheduled-wallets">0</p></div>
                    <div class="card status-card"><h3>Awaiting</h3><p id="awaiting-execution-wallets">0</p></div>
                    <div class="card status-card"><h3>In Progress</h3><p id="in-progress-wallets">0</p></div>
                    <div class="card status-card"><h3>Success</h3><p id="success-wallets">0</p></div>
                    <div class="card status-card"><h3>Failed</h3><p id="failed-wallets">0</p></div>
                </div>
                <div class="card" id="sponsor-status-card">
                    <h2>Status Sponsor Pool</h2>
                    <div id="sponsor-status-list">
                        <p>Memuat status...</p>
                    </div>
                </div>
                <div class="card">
                    <h2>Database Wallet Target</h2>
                    <input type="text" id="wallet-search" placeholder="Cari berdasarkan status atau public key...">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Status</th>
                                    <th>Public Key</th>
                                    <th>Unlock Time</th>
                                    <th>Info</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="wallet-table-body"></tbody>
                        </table>
                    </div>
                </div>
                <div class="card">
                    <h2>Real-time Log</h2>
                    <div id="log-container"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Detail Wallet (Pop-up) -->
    <div id="details-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="modal-close-btn" class="modal-close">&times;</button>
            <h2>Detail Wallet</h2>
            
            <div class="detail-section">
                <h4>üîë Mnemonic</h4>
                <p id="detail-mnemonic" class="monospace-text"></p>
            </div>
            <div class="detail-section">
                <h4>üë§ Public Key</h4>
                <p id="detail-pubkey" class="monospace-text"></p>
            </div>
            <hr>
            <h3>Rincian Aset</h3>
            <div class="asset-grid">
                <div class="asset-item">
                    <h4>üí∞ Saldo Tersedia</h4>
                    <p id="detail-balance"></p>
                </div>
                <div class="asset-item">
                    <h4>üîê Total Terkunci</h4>
                    <p id="detail-locked"></p>
                </div>
            </div>
            <div class="detail-section">
                <h4>üîí Rincian Koin Terkunci</h4>
                <div id="detail-claimables-list"></div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
</body>
</html>
